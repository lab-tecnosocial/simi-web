---
import "../styles/global.css";
import Footer from "../components/Footer.astro";
import Hero2Section from "../components/Hero2.astro";
import Header from "../components/Header.jsx";
import PeopleSection from "../components/PeopleSection.jsx";
import Hero from "../components/Hero.jsx";
import SuggestionBox from "../components/SuggestionBox.jsx";
---

<!doctype html>
<html lang="es">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css"
      rel="stylesheet"
    />
    <script is:inline src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"
    ></script>

    <!--<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" /> -->

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />

    <!-- Google fonts -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Text+Me+One&display=swap"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Text+Me+One&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <link href="/assets/css/style.css" rel="stylesheet" />

    <title>Simi</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico" />

    <!-- Primary Meta Tags -->
    <title>Simi - Aprende Quechua de una manera amigable</title>
    <meta
      name="title"
      content="Simi - Aprende Quechua de una manera amigable"
    />
    <meta
      name="description"
      content="Simi es una aplicación para celulares que promueve el aprendizaje del quechua nivel básico de una forma amigable y accesible a través de unidades de aprendizaje que contienen audios e ilustraciones"
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://simiquechua.app/" />
    <meta
      property="og:title"
      content="Simi - Aprende Quechua de una manera amigable"
    />
    <meta
      property="og:description"
      content="Simi es una aplicación para celulares que promueve el aprendizaje del quechua nivel básico de una forma amigable y accesible a través de unidades de aprendizaje que contienen audios e ilustraciones"
    />
    <meta
      property="og:image"
      content="https://simiquechua.app/assets/images/preview.png"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://simiquechua.app/" />
    <meta
      property="twitter:title"
      content="Simi - Aprende Quechua de una manera amigable"
    />
    <meta
      property="twitter:description"
      content="Simi es una aplicación para celulares que promueve el aprendizaje del quechua nivel básico de una forma amigable y accesible a través de unidades de aprendizaje que contienen audios e ilustraciones"
    />
    <meta
      property="twitter:image"
      content="https://simiquechua.app/assets/images/preview.png"
    />
    <script>
      import AOS from "aos";
      import "aos/dist/aos.css";
      document.addEventListener("DOMContentLoaded", () => {
        AOS.init();
      });
    </script>
  </head>

  <body>
    <Header client:load />

    <div class="bg-rana">
      <Hero />

      <!-- Android SIMI App Downloads Counter -->
      <section
        id="counter-section"
        class="w-full h-auto py-12 relative bg-transparent"
      >
        <div id="counter-container" class="flex justify-center gap-2.5">
          <!-- Counter digits will be added here -->
        </div>
        <h2
          class="text-5xl text-[#4B4B4B] downloads-txt font-roboto font-bold pt-8 text-center"
        >
          Descargas hasta hoy
        </h2>
      </section>

      <!--  Hero Section  -->
      <Hero2Section />
    </div>

    <!--  People Section  -->
    <PeopleSection client:load />

    <!--  SuggestionBox Section  -->
    <SuggestionBox />

    <!--Footer  -->
    <Footer />

    <!--Suggestion box
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>-->
    <script>
      //AOS.init();
    </script>

    <!--<script>
      var scrollMessage1 = document.querySelector(".scroll-message");
      var scrollMessage2 = document.querySelector(".scroll-message-2");
      var prevScrollPos = window.pageYOffset;

      window.addEventListener("scroll", function () {
        var currentScrollPos = window.pageYOffset;
        var scrollPosition = window.scrollY;
        var elementPosition =
          document.getElementById("people-images").offsetTop;

        if (scrollPosition > elementPosition - window.innerHeight + 200) {
          scrollMessage1.style.display = "block";
        } else {
          scrollMessage1.style.display = "none";
        }

        if (scrollPosition > elementPosition + 200) {
          scrollMessage2.style.display = "block";
        } else {
          scrollMessage2.style.display = "none";
        }

        if (currentScrollPos < prevScrollPos) {
          scrollMessage1.style.display = "none";
          scrollMessage2.style.display = "none";
        }

        prevScrollPos = currentScrollPos;
      });
    </script>  -->
    <script>
      var scrollMessage1 = document.querySelector(
        ".scroll-message"
      ) as HTMLElement;
      var scrollMessage2 = document.querySelector(
        ".scroll-message-2"
      ) as HTMLElement;
      var prevScrollPos = window.pageYOffset;

      window.addEventListener("scroll", function () {
        var currentScrollPos = window.pageYOffset;
        var scrollPosition = window.scrollY;
        var elementPosition =
          document.getElementById("people-images")?.offsetTop || 0;

        if (scrollPosition > elementPosition - window.innerHeight + 200) {
          if (scrollMessage1) scrollMessage1.style.display = "block";
        } else {
          if (scrollMessage1) scrollMessage1.style.display = "none";
        }

        if (scrollPosition > elementPosition + 200) {
          if (scrollMessage2) scrollMessage2.style.display = "block";
        } else {
          if (scrollMessage2) scrollMessage2.style.display = "none";
        }

        if (currentScrollPos < prevScrollPos) {
          if (scrollMessage1) scrollMessage1.style.display = "none";
          if (scrollMessage2) scrollMessage2.style.display = "none";
        }

        prevScrollPos = currentScrollPos;
      });
    </script>

    <!-- <script>
      document.addEventListener("DOMContentLoaded", function () {
        var scrollMessage = document.querySelector(".scroll-message");
        var closeBtn = document.querySelector(".scroll-message .close-btn");

        closeBtn.addEventListener("click", function () {
          scrollMessage.style.display = "none";
        });
      });
    </script>-->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var scrollMessage = document.querySelector(
          ".scroll-message"
        ) as HTMLElement;
        var closeBtn = document.querySelector(
          ".scroll-message .close-btn"
        ) as HTMLElement;

        if (closeBtn) {
          closeBtn.addEventListener("click", function () {
            if (scrollMessage) {
              scrollMessage.style.display = "none";
            }
          });
        }
      });
    </script>

    <!-- Android App Downloads Counter -->
    <script>
      const targetNumber = 7231;
      const counterContainer = document.getElementById("counter-container");
      const digits = targetNumber.toString().length;
      let hasScrolled = false;
      document.addEventListener("DOMContentLoaded", function () {
        for (let i = 0; i < digits; i++) {
          const draw = document.createElement("div");
          draw.className =
            "w-14 h-16 text-[#74c741] text-5xl flex justify-center items-center font-bold bg-transparent rounded-lg border border-black shadow-md m-1 px-4";
          draw.textContent = "0";
          counterContainer.appendChild(draw);
        }
        function countUp() {
          let currentNumber = 0;
          let increment = Math.ceil(targetNumber / 50);
          const interval = setInterval(() => {
            if (currentNumber >= targetNumber) {
              currentNumber = targetNumber;
              decorCounter(currentNumber);
              clearInterval(interval);
            } else {
              currentNumber++;
              currentNumber = currentNumber + increment;
              decorCounter(currentNumber);
            }
          }, 50);
        }
        window.addEventListener("scroll", function () {
          const sectionTop =
            document.getElementById("counter-section").offsetTop;
          const scrollPosition = window.scrollY + window.innerHeight;
          if (scrollPosition > sectionTop && !hasScrolled) {
            hasScrolled = true;
            countUp();
          }
        });
        function decorCounter(num) {
          const currentDigits = num.toString().padStart(digits, "0");
          Array.from(counterContainer.children).forEach((cell, index) => {
            cell.textContent = currentDigits[index];
          });
        }
      });
    </script>-->
  </body>
</html>
